        const xpTable = [
            { level: 1, xpToNext: 83 },
            { level: 2, xpToNext: 91 },
            { level: 3, xpToNext: 101 },
            { level: 4, xpToNext: 112 },
            { level: 5, xpToNext: 124 },
            { level: 6, xpToNext: 137 },
            { level: 7, xpToNext: 151 },
            { level: 8, xpToNext: 167 },
            { level: 9, xpToNext: 185 },
            { level: 10, xpToNext: 204 },
            { level: 11, xpToNext: 225 },
            { level: 12, xpToNext: 249 },
            { level: 13, xpToNext: 274 },
            { level: 14, xpToNext: 303 },
            { level: 15, xpToNext: 334 },
            { level: 16, xpToNext: 369 },
            { level: 17, xpToNext: 408 },
            { level: 18, xpToNext: 450 },
            { level: 19, xpToNext: 496 },
            { level: 20, xpToNext: 548 },
            { level: 21, xpToNext: 605 },
            { level: 22, xpToNext: 667 },
            { level: 23, xpToNext: 737 },
            { level: 24, xpToNext: 813 },
            { level: 25, xpToNext: 897 },
            { level: 26, xpToNext: 990 },
            { level: 27, xpToNext: 1093 },
            { level: 28, xpToNext: 1207 },
            { level: 29, xpToNext: 1332 },
            { level: 30, xpToNext: 1470 },
            { level: 31, xpToNext: 1622 },
            { level: 32, xpToNext: 1791 },
            { level: 33, xpToNext: 1977 },
            { level: 34, xpToNext: 2182 },
            { level: 35, xpToNext: 2408 },
            { level: 36, xpToNext: 2658 },
            { level: 37, xpToNext: 2934 },
            { level: 38, xpToNext: 3239 },
            { level: 39, xpToNext: 3576 },
            { level: 40, xpToNext: 3947 },
            { level: 41, xpToNext: 4357 },
            { level: 42, xpToNext: 4810 },
            { level: 43, xpToNext: 5310 },
            { level: 44, xpToNext: 5862 },
            { level: 45, xpToNext: 6471 },
            { level: 46, xpToNext: 7144 },
            { level: 47, xpToNext: 7886 },
            { level: 48, xpToNext: 8706 },
            { level: 49, xpToNext: 9612 },
            { level: 50, xpToNext: 10611 },
            { level: 51, xpToNext: 11715 },
            { level: 52, xpToNext: 12933 },
            { level: 53, xpToNext: 14278 },
            { level: 54, xpToNext: 15763 },
            { level: 55, xpToNext: 17403 },
            { level: 56, xpToNext: 19214 },
            { level: 57, xpToNext: 21212 },
            { level: 58, xpToNext: 23419 },
            { level: 59, xpToNext: 25856 },
            { level: 60, xpToNext: 28546 },
            { level: 61, xpToNext: 31516 },
            { level: 62, xpToNext: 34795 },
            { level: 63, xpToNext: 38415 },
            { level: 64, xpToNext: 42413 },
            { level: 65, xpToNext: 46826 },
            { level: 66, xpToNext: 51699 },
            { level: 67, xpToNext: 57078 },
            { level: 68, xpToNext: 63018 },
            { level: 69, xpToNext: 69576 },
            { level: 70, xpToNext: 76817 },
            { level: 71, xpToNext: 84811 },
            { level: 72, xpToNext: 93638 },
            { level: 73, xpToNext: 103383 },
            { level: 74, xpToNext: 114142 },
            { level: 75, xpToNext: 126022 },
            { level: 76, xpToNext: 139138 },
            { level: 77, xpToNext: 153619 },
            { level: 78, xpToNext: 169607 },
            { level: 79, xpToNext: 187260 },
            { level: 80, xpToNext: 206750 },
            { level: 81, xpToNext: 228268 },
            { level: 82, xpToNext: 252027 },
            { level: 83, xpToNext: 278259 },
            { level: 84, xpToNext: 307221 },
            { level: 85, xpToNext: 339197 },
            { level: 86, xpToNext: 374502 },
            { level: 87, xpToNext: 413482 },
            { level: 88, xpToNext: 456519 },
            { level: 89, xpToNext: 504036 },
            { level: 90, xpToNext: 556499 },
            { level: 91, xpToNext: 614422 },
            { level: 92, xpToNext: 678375 },
            { level: 93, xpToNext: 748985 },
            { level: 94, xpToNext: 826944 },
            { level: 95, xpToNext: 913018 },
            { level: 96, xpToNext: 1008052 },
            { level: 97, xpToNext: 1112977 },
            { level: 98, xpToNext: 1228824 },
            { level: 99, xpToNext: 1356729 },
            { level: 100, xpToNext: 1497948 },
            { level: 101, xpToNext: 1653867 },
            { level: 102, xpToNext: 1826015 },
            { level: 103, xpToNext: 2016081 },
            { level: 104, xpToNext: 2225932 },
            { level: 105, xpToNext: 2457626 },
            { level: 106, xpToNext: 2713436 },
            { level: 107, xpToNext: 2995874 },
            { level: 108, xpToNext: 3307711 },
            { level: 109, xpToNext: 3652006 },
            { level: 110, xpToNext: 4032139 },
            { level: 111, xpToNext: 4451840 },
            { level: 112, xpToNext: 4915228 },
            { level: 113, xpToNext: 5426849 },
            { level: 114, xpToNext: 5991724 },
            { level: 115, xpToNext: 6615397 },
            { level: 116, xpToNext: 7303988 },
            { level: 117, xpToNext: 8064253 },
            { level: 118, xpToNext: 8903655 },
            { level: 119, xpToNext: 9830429 },
            { level: 120, xpToNext: 104273121 }
        ];

        function getLevelByXp(currentXp) {
            let totalXp = 0;
            for (let i = 0; i < xpTable.length; i++) {
                totalXp += xpTable[i].xpToNext;
                if (currentXp < totalXp) {
                    return { level: xpTable[i].level, remainingXp: totalXp - currentXp };
                }
            }
            return { level: xpTable[xpTable.length - 1].level, remainingXp: 0 };
        }

        function calculateResources(currentXp, targetLevel, bonusPerResource, xpGivenPerResource) {
            const { level: currentLevel, remainingXp } = getLevelByXp(currentXp);
            
            if (currentLevel >= targetLevel || targetLevel > 120) {
                return { resources: 0 };
            }

            let totalXpNeeded = remainingXp;

            for (let i = currentLevel + 1; i < targetLevel; i++) {
                totalXpNeeded += xpTable[i - 1].xpToNext;
            }
            
            if(bonusPerResource > 0){
            	xpGivenPerResource = Math.floor(xpGivenPerResource * (1 + (bonusPerResource / 100)));
            }
            
            document.getElementById("perResource").innerHTML = `XP Per Resource: ${xpGivenPerResource}`;
						
            let requiredResources = Math.ceil(totalXpNeeded / xpGivenPerResource);
						
            return { requiredResources };
        }

        function handleCalculate() {
            const currentXp = parseInt(document.getElementById("currentXp").value);
            const targetLevel = parseInt(document.getElementById("targetLevel").value);
            const bonusPerResource = parseInt(document.getElementById("bonusExp").value);
            const xpGivenPerResource = parseInt(document.getElementById("xpGivenPerResource").value);

            if (isNaN(currentXp) || isNaN(targetLevel) || isNaN(xpGivenPerResource)) {
                alert("Please enter valid numbers.");
                return;
            }

            let { requiredResources } = calculateResources(currentXp, targetLevel, bonusPerResource, xpGivenPerResource);

	    requiredResources = requiredResources === undefined ? 0 : requiredResources;
		
            document.getElementById("result").innerHTML = `Resources required to level: ${requiredResources}`;
        }
